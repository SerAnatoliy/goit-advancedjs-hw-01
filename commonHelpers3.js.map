{"version":3,"file":"commonHelpers3.js","sources":["../src/js/03-feedback.js"],"sourcesContent":["import throttle from 'lodash.throttle';\n\nconst rec = {\n    form: document.querySelector('.js-feedback-form'),\n    input: document.querySelector('.js-feedback-form input'),\n    message: document.querySelector('.js-feedback-form textarea')\n};\n\nlet formData = {}\nconst STOR_KEY = 'feedback-form-state'\n\ngetSaveData()\n\nrec.form.addEventListener('input', throttle(handlerInput, 500))\nrec.form.addEventListener('submit', handlerSubmit)\n\nfunction handlerInput() {\n    formData = {\n        email: rec.input.value,\n        message: rec.message.value,\n\n    }\n    localStorage.setItem(STOR_KEY, JSON.stringify(formData))\n}\n\nfunction handlerSubmit(def) {\n    def.preventDefault();\n\n    console.log(formData)\n\n    if (rec.input.value.length !== 0 && rec.message.value.length !== 0) {\n        def.currentTarget.reset()\n        localStorage.removeItem(STOR_KEY)\n    }\n    else {\n        alert('All fields must be filled')\n    }\n}\n\nfunction getSaveData() {\n    const lsData = JSON.parse(localStorage.getItem(STOR_KEY))\n    if (!lsData) {\n        return\n    }\n    rec.input.value = lsData.email ?? ''\n    rec.message.value = lsData.message ?? ''\n}\n\n"],"names":["rec","formData","STOR_KEY","getSaveData","throttle","handlerInput","handlerSubmit","def","lsData"],"mappings":"wIAEA,MAAMA,EAAM,CACR,KAAM,SAAS,cAAc,mBAAmB,EAChD,MAAO,SAAS,cAAc,yBAAyB,EACvD,QAAS,SAAS,cAAc,4BAA4B,CAChE,EAEA,IAAIC,EAAW,CAAE,EACjB,MAAMC,EAAW,sBAEjBC,EAAa,EAEbH,EAAI,KAAK,iBAAiB,QAASI,EAASC,EAAc,GAAG,CAAC,EAC9DL,EAAI,KAAK,iBAAiB,SAAUM,CAAa,EAEjD,SAASD,GAAe,CACpBJ,EAAW,CACP,MAAOD,EAAI,MAAM,MACjB,QAASA,EAAI,QAAQ,KAExB,EACD,aAAa,QAAQE,EAAU,KAAK,UAAUD,CAAQ,CAAC,CAC3D,CAEA,SAASK,EAAcC,EAAK,CACxBA,EAAI,eAAc,EAElB,QAAQ,IAAIN,CAAQ,EAEhBD,EAAI,MAAM,MAAM,SAAW,GAAKA,EAAI,QAAQ,MAAM,SAAW,GAC7DO,EAAI,cAAc,MAAO,EACzB,aAAa,WAAWL,CAAQ,GAGhC,MAAM,2BAA2B,CAEzC,CAEA,SAASC,GAAc,CACnB,MAAMK,EAAS,KAAK,MAAM,aAAa,QAAQN,CAAQ,CAAC,EACnDM,IAGLR,EAAI,MAAM,MAAQQ,EAAO,OAAS,GAClCR,EAAI,QAAQ,MAAQQ,EAAO,SAAW,GAC1C"}